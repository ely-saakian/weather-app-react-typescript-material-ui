(this["webpackJsonpweather-app"]=this["webpackJsonpweather-app"]||[]).push([[0],{101:function(e,t,n){},128:function(e,t,n){},129:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),i=n(11),r=n.n(i),s=(n(101),n(174)),o=n(164),j=n(176),l=n(23),d=n(166),h=n(162),u=n(35),b=n.n(u),m=n(2),p=Object(h.a)({allCaps:{textTransform:"uppercase"},container:{backgroundColor:"#3f50b5",color:"white",padding:"1rem 2rem",height:"100%",paddingTop:"1.45rem"}});function O(e){var t=e.description,n=e.feelsLike,a=e.windSpeed,c=e.humidity,i=e.uvi,r=e.sunrise,s=e.sunset,l=p();return Object(m.jsxs)(o.a,{container:!0,direction:"column",justifyContent:"space-between",className:l.container,children:[Object(m.jsx)(o.a,{item:!0,children:Object(m.jsx)(d.a,{variant:"h6",children:Object(m.jsx)(j.a,{component:"span",className:l.allCaps,fontWeight:"400",children:t})})}),Object(m.jsxs)(o.a,{item:!0,children:[Object(m.jsx)(d.a,{children:Object(m.jsx)(j.a,{component:"span",fontWeight:"300",children:"Feels like"})}),Object(m.jsx)(d.a,{children:Object(m.jsxs)(j.a,{component:"span",fontWeight:"bold",children:[Math.round(n),Object(m.jsx)("span",{children:"\xb0"}),"F"]})})]}),Object(m.jsxs)(o.a,{item:!0,children:[Object(m.jsx)(d.a,{children:Object(m.jsx)(j.a,{component:"span",fontWeight:"300",children:"Sunrise"})}),Object(m.jsx)(d.a,{children:Object(m.jsx)(j.a,{component:"span",fontWeight:"bold",children:b.a.unix(r).format("hh:mm a")})})]}),Object(m.jsxs)(o.a,{item:!0,children:[Object(m.jsx)(d.a,{children:Object(m.jsx)(j.a,{component:"span",fontWeight:"300",children:"Sunset"})}),Object(m.jsx)(d.a,{children:Object(m.jsx)(j.a,{component:"span",fontWeight:"bold",children:b.a.unix(s).format("hh:mm a")})})]}),Object(m.jsxs)(o.a,{item:!0,children:[Object(m.jsx)(d.a,{children:Object(m.jsx)(j.a,{component:"span",fontWeight:"300",children:"Humidity"})}),Object(m.jsx)(d.a,{children:Object(m.jsxs)(j.a,{component:"span",fontWeight:"bold",children:[c,"%"]})})]}),Object(m.jsxs)(o.a,{item:!0,children:[Object(m.jsx)(d.a,{children:Object(m.jsx)(j.a,{component:"span",fontWeight:"300",children:"Wind speed"})}),Object(m.jsx)(d.a,{children:Object(m.jsxs)(j.a,{component:"span",fontWeight:"bold",children:[a," mp/h"]})})]}),Object(m.jsxs)(o.a,{item:!0,children:[Object(m.jsx)(d.a,{children:Object(m.jsx)(j.a,{component:"span",fontWeight:"300",children:"UVI"})}),Object(m.jsx)(d.a,{children:Object(m.jsx)(j.a,{component:"span",fontWeight:"bold",children:i})})]})]})}var x=Object(h.a)({day:{padding:"1rem 2rem",backgroundColor:function(e){return e?"#3f50b5":""},color:function(e){return e?"white":"black"}},allCaps:{textTransform:"uppercase"}});function f(e){var t=e.active,n=void 0!==t&&t,a=e.timestamp,c=void 0===a?Date.now():a,i=e.temp,r=x(n);return Object(m.jsxs)(o.a,{container:!0,justifyContent:"space-between",alignItems:"center",className:r.day,children:[Object(m.jsx)(o.a,{item:!0,children:Object(m.jsxs)(o.a,{container:!0,direction:"column",children:[Object(m.jsx)(o.a,{item:!0,children:Object(m.jsx)(d.a,{children:Object(m.jsx)(j.a,{component:"span",className:r.allCaps,fontWeight:"400",children:b.a.unix(c).format("ddd")})})}),Object(m.jsx)(o.a,{item:!0,children:Object(m.jsx)(d.a,{variant:"caption",children:Object(m.jsx)(j.a,{component:"span",className:r.allCaps,children:b.a.unix(c).format("D MMM")})})})]})}),Object(m.jsx)(o.a,{item:!0,children:Object(m.jsxs)(d.a,{variant:"h5",children:[Math.round(i),Object(m.jsx)("span",{children:"\xb0"}),"F"]})})]})}var v=Object(h.a)({pointer:{cursor:"pointer","&:hover":{backgroundColor:"#dee3ff"}}});function y(e){var t=e.daily,n=e.selectDayHandler,a=e.activeDayIndex,c=v();return Object(m.jsx)(o.a,{container:!0,direction:"column",children:t.map((function(e,t){var i=e.dt,r=e.temp;return Object(m.jsx)(o.a,{item:!0,className:c.pointer,onClick:function(e){return n(e,t)},children:Object(m.jsx)(f,{active:a===t,timestamp:i,temp:r.day})},i)}))})}function g(e){var t=e.daily,n=Object(a.useState)(t[0]),c=Object(l.a)(n,2),i=c[0],r=c[1],s=Object(a.useState)(0),j=Object(l.a)(s,2),d=j[0],h=j[1];return Object(m.jsxs)(o.a,{container:!0,children:[Object(m.jsx)(o.a,{item:!0,xs:6,children:Object(m.jsx)(y,{activeDayIndex:d,selectDayHandler:function(e,n){r(t[n]),h(n)},daily:t})}),Object(m.jsx)(o.a,{item:!0,xs:6,children:Object(m.jsx)(O,{sunrise:null===i||void 0===i?void 0:i.sunrise,sunset:null===i||void 0===i?void 0:i.sunset,description:null===i||void 0===i?void 0:i.weather[0].main,feelsLike:null===i||void 0===i?void 0:i.feels_like.day,uvi:null===i||void 0===i?void 0:i.uvi,humidity:null===i||void 0===i?void 0:i.humidity,windSpeed:null===i||void 0===i?void 0:i.wind_speed})})]})}var w=n(167),C=n(168),I=n(14),k=n(29),W=n.n(k),D=n(49),S=n(79),N=n(80),F=new(function(){function e(t){Object(S.a)(this,e),this.key=void 0,this.city="",this.country="",this.key=t}return Object(N.a)(e,[{key:"getWeatherForCityByCoords",value:function(){var e=Object(D.a)(W.a.mark((function e(t,n){var a,c,i;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="https://api.openweathermap.org/data/2.5/onecall?lat=".concat(n,"&lon=").concat(t,"&exclude=minutely&&appid=").concat(this.key,"&units=imperial"),this.getCityAndCountryByCoords(t,n),e.prev=2,e.next=5,fetch(a);case 5:return c=e.sent,e.next=8,c.json();case 8:return i=e.sent,e.abrupt("return",{name:"".concat(this.city,", ").concat(this.country),coord:{lat:i.lat,lon:i.lon},current:{max:Math.round(i.daily[0].temp.max),min:Math.round(i.daily[0].temp.min),timestamp:i.current.dt,temp:Math.round(i.current.temp),weather:{description:i.current.weather[0].description,icon:"assets/".concat(i.current.weather[0].icon,"@4x.png"),main:i.current.weather[0].main}},hourly:this.hourlyEveryOtherHourLimitTo(i.hourly,5),daily:i.daily});case 12:throw e.prev=12,e.t0=e.catch(2),e.t0;case 15:case"end":return e.stop()}}),e,this,[[2,12]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getWeatherForCityById",value:function(){var e=Object(D.a)(W.a.mark((function e(t){var n,a,c;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCoordsForCityById(t);case 2:return n=e.sent,a=n.lon,c=n.lat,e.abrupt("return",this.getWeatherForCityByCoords(a,c));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getCityAndCountryByCoords",value:function(){var e=Object(D.a)(W.a.mark((function e(t,n){var a,c,i,r,s;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=".concat(n,"&longitude=").concat(t,"&localityLanguage=en"),e.prev=1,e.next=4,fetch(a);case 4:return c=e.sent,e.next=7,c.json();case 7:i=e.sent,r=i.city,s=i.countryCode,this.city=r,this.country=s,e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(1),e.t0;case 17:case"end":return e.stop()}}),e,this,[[1,14]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getCoordsForCityById",value:function(){var e=Object(D.a)(W.a.mark((function e(t){var n,a,c,i,r;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://api.openweathermap.org/data/2.5/weather?id=".concat(t,"&appid=").concat(this.key),e.prev=1,e.next=4,fetch(n);case 4:return a=e.sent,e.next=7,a.json();case 7:return c=e.sent,this.city=c.name,this.country=c.sys.country,i=c.coord.lon,r=c.coord.lat,e.abrupt("return",{lon:i,lat:r});case 15:throw e.prev=15,e.t0=e.catch(1),e.t0;case 18:case"end":return e.stop()}}),e,this,[[1,15]])})));return function(t){return e.apply(this,arguments)}}()},{key:"hourlyEveryOtherHourLimitTo",value:function(e,t){for(var n=[],a=0,c=0;c<t;c++)e[a].temp=Math.round(e[a].temp),n.push(e[a]),a+=2;return n}}]),e}())("a3345aba730886077c25b145c5518740"),L=Object(a.createContext)({weatherClient:F,setSelectedCityId:function(e){},setWeatherData:function(e){},setLoadingData:function(e){},clearState:function(){}});function _(e){var t=Object(a.useState)(),n=Object(l.a)(t,2),c=n[0],i=n[1],r=Object(a.useState)(),s=Object(l.a)(r,2),o=s[0],j=s[1],d=Object(a.useState)(!1),h=Object(l.a)(d,2),u=h[0],b=h[1],p={loadingData:u,weatherClient:F,weatherData:c,selectedCityId:o,setLoadingData:function(e){return b(e)},setSelectedCityId:function(e){return j(e)},setWeatherData:function(e){i(e)},clearState:function(){b(!1),j(void 0),i(void 0)}};return Object(m.jsx)(L.Provider,{value:p,children:e.children})}var M=L,B=Object(h.a)({container:{padding:"0 2rem",marginTop:"1rem"},icon:{marginLeft:"-12px"}});function E(e){var t=e.city,n=B(),c=Object(I.f)(),i=Object(a.useContext)(M);return Object(m.jsxs)(o.a,{container:!0,alignItems:"center",justifyContent:"space-between",className:n.container,children:[Object(m.jsx)(o.a,{item:!0,children:Object(m.jsx)(w.a,{"aria-label":"search",color:"primary",className:n.icon,onClick:function(){i.clearState(),c.push("/")},children:Object(m.jsx)(C.a,{fontSize:"large"})})}),Object(m.jsx)(o.a,{item:!0,children:Object(m.jsx)(d.a,{variant:"button",children:t})})]})}function H(e){var t=e.time,n=e.temp,a=e.condition,c=e.icon;return Object(m.jsxs)(o.a,{container:!0,alignItems:"center",direction:"column",children:[Object(m.jsx)(o.a,{item:!0,children:Object(m.jsx)(d.a,{children:b.a.unix(t).format("h A")})}),Object(m.jsx)(o.a,{item:!0,children:Object(m.jsx)(d.a,{children:Object(m.jsxs)(j.a,{component:"span",fontWeight:"bold",children:[n,Object(m.jsx)("span",{children:"\xb0"}),"F"]})})}),Object(m.jsx)(o.a,{item:!0,children:Object(m.jsxs)(o.a,{container:!0,alignItems:"center",children:[Object(m.jsx)(o.a,{item:!0,children:Object(m.jsx)("img",{src:c,alt:"weather icon",width:"25"})}),Object(m.jsx)(o.a,{item:!0,children:Object(m.jsx)(d.a,{children:Object(m.jsx)(j.a,{component:"span",fontWeight:"300",children:a})})})]})})]})}var P=Object(h.a)({container:{padding:"1rem 2rem"}});function A(e){var t=e.hourly,n=P();return Object(m.jsx)(o.a,{container:!0,justifyContent:"space-between",className:n.container,children:t.map((function(e){return Object(m.jsx)(o.a,{item:!0,children:Object(m.jsx)(H,{time:e.dt,temp:e.temp,condition:e.weather[0].main,icon:"assets/".concat(e.weather[0].icon,"@4x.png")})},e.dt)}))})}function T(e){var t=e.temp,n=e.high,a=e.low,c=e.conditions,i=e.icon;return Object(m.jsxs)(o.a,{container:!0,justifyContent:"center",alignItems:"center",direction:"column",children:[Object(m.jsx)(o.a,{item:!0,children:Object(m.jsxs)(o.a,{container:!0,alignItems:"center",spacing:2,children:[Object(m.jsx)(o.a,{item:!0,children:Object(m.jsx)(d.a,{variant:"h1",color:"primary",children:Object(m.jsxs)(j.a,{fontWeight:"400",children:[t,Object(m.jsx)("span",{children:"\xb0"}),"F"]})})}),Object(m.jsxs)(o.a,{item:!0,children:[Object(m.jsx)(d.a,{variant:"h5",align:"center",children:Object(m.jsxs)(j.a,{fontWeight:"300",children:["H: ",n,Object(m.jsx)("span",{children:"\xb0"}),"F"]})}),Object(m.jsx)(d.a,{variant:"h5",align:"center",children:Object(m.jsxs)(j.a,{fontWeight:"300",children:["L: ",a,Object(m.jsx)("span",{children:"\xb0"}),"F"]})})]})]})}),Object(m.jsx)(o.a,{item:!0,children:Object(m.jsxs)(o.a,{container:!0,justifyContent:"center",alignItems:"center",children:[Object(m.jsx)(o.a,{item:!0,children:Object(m.jsx)("img",{src:i,alt:"weather icon",width:"100"})}),Object(m.jsx)(o.a,{item:!0,children:Object(m.jsx)(d.a,{variant:"h4",align:"center",children:c})})]})})]})}var z=Object(h.a)({container:{height:"100%"}});var G=n(180),J=n(171),U=n(179);function R(){return Object(m.jsx)(o.a,{container:!0,justifyContent:"center",children:Object(m.jsxs)(o.a,{item:!0,children:[Object(m.jsx)(d.a,{component:"h1",variant:"h2",color:"primary",children:Object(m.jsx)(j.a,{fontWeight:"bold",component:"span",children:"Weather Now"})}),Object(m.jsx)(d.a,{align:"right",children:"Powered by OpenWeather API"})]})})}var V=n(50),q=n(67),K=n(175),Q=n(177),X=n(83),Y=n.n(X),Z=n(81),$=n.n(Z),ee=Object(h.a)((function(e){return{icon:{color:e.palette.text.secondary,marginRight:e.spacing(2)},loading:{color:e.palette.text.secondary}}}));function te(){var e=Object(a.useContext)(M),t=ee(),n=Object(a.useState)(""),i=Object(l.a)(n,2),r=i[0],s=i[1],j=Object(a.useState)([]),h=Object(l.a)(j,2),u=h[0],b=h[1],p=Object(a.useState)(!1),O=Object(l.a)(p,2),x=O[0],f=O[1],v=function(e){window.fetch("https://api.teleport.org/api/cities/?search=".concat(e.input,"&limit=5")).then((function(e){return e.json()})).then((function(e){var t;e&&(t=Object(q.a)(e._embedded["city:search-results"]),b(t),f(!1))}))},y=Object(a.useMemo)((function(){return $()(v,2e3)}),[]);return c.a.useEffect((function(){""!==r?r.length>2&&(f(!0),y({input:r})):b([])}),[r,y]),Object(m.jsx)(Q.a,{style:{width:350},getOptionLabel:function(e){return e.matching_full_name},options:u,loading:x,onChange:function(t,n){null===n&&e.setSelectedCityId();var a=null===n||void 0===n?void 0:n._links["city:item"].href.split(":")[2].replace("/","");a&&e.setSelectedCityId(a),b(n?[{matching_full_name:n.matching_full_name,_links:n._links}].concat(Object(q.a)(u)):u)},onInputChange:function(e,t){s(t)},renderInput:function(e){return Object(m.jsx)(K.a,Object(V.a)(Object(V.a)({},e),{},{label:"Start typing city name",fullWidth:!0,InputProps:Object(V.a)(Object(V.a)({},e.InputProps),{},{endAdornment:Object(m.jsxs)(c.a.Fragment,{children:[x?Object(m.jsx)(J.a,{thickness:4,className:t.loading,size:20}):null,e.InputProps.endAdornment]})})}))},renderOption:function(e){return Object(m.jsxs)(o.a,{container:!0,alignItems:"center",children:[Object(m.jsx)(o.a,{item:!0,children:Object(m.jsx)(Y.a,{className:t.icon})}),Object(m.jsx)(o.a,{item:!0,children:Object(m.jsx)(d.a,{children:e.matching_full_name})})]})}})}var ne=n(172);function ae(){var e=Object(a.useContext)(M),t=Object(I.f)();return Object(m.jsx)(ne.a,{type:"submit",variant:"contained",color:"primary",disableElevation:!0,disabled:void 0===e.selectedCityId,onClick:function(){void 0!==e.selectedCityId&&(e.setLoadingData(!0),e.weatherClient.getWeatherForCityById(e.selectedCityId).then((function(t){return e.setWeatherData(t)})).then((function(){return e.setLoadingData(!1)})).then((function(){return t.push("/weather")})))},endIcon:Object(m.jsx)(C.a,{}),children:"Go"})}var ce=n(173);function ie(){var e=Object(a.useContext)(M),t=Object(I.f)();return Object(m.jsx)(ne.a,{type:"submit",color:"primary",disableElevation:!0,endIcon:Object(m.jsx)(ce.a,{}),onClick:function(){e.setLoadingData(!0),navigator.geolocation.getCurrentPosition((function(n){var a=n.coords;e.weatherClient.getWeatherForCityByCoords(a.longitude,a.latitude).then((function(t){return e.setWeatherData(t)})).then((function(){return e.setLoadingData(!1)})).then((function(){return t.push("/weather")}))}))},children:"Use my location"})}function re(){return Object(m.jsxs)(o.a,{container:!0,alignItems:"flex-end",direction:"column",spacing:3,children:[Object(m.jsx)(o.a,{item:!0,children:Object(m.jsx)(te,{})}),Object(m.jsx)(o.a,{item:!0,children:Object(m.jsxs)(o.a,{container:!0,alignItems:"center",spacing:2,children:[Object(m.jsx)(o.a,{item:!0,children:Object(m.jsx)(ie,{})}),Object(m.jsx)(o.a,{item:!0,children:Object(m.jsx)(ae,{})})]})})]})}var se=Object(h.a)((function(e){return Object(U.a)({grid:{height:"100%"},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},backdropGridItem:{padding:"0px !important"}})}));var oe=n(38),je=n(178),le=(n(128),Object(h.a)({container:{height:"100%"}})),de=[{path:"/",name:"Home",Component:function(){var e=Object(a.useContext)(M),t=se();return Object(m.jsxs)(o.a,{container:!0,className:t.grid,justifyContent:"center",alignContent:"center",children:[Object(m.jsx)(o.a,{item:!0,className:t.backdropGridItem,children:Object(m.jsx)(G.a,{className:t.backdrop,open:e.loadingData||!1,children:Object(m.jsx)(J.a,{color:"inherit"})})}),Object(m.jsx)(o.a,{item:!0,children:Object(m.jsx)(R,{})}),Object(m.jsx)(o.a,{container:!0,justifyContent:"center",children:Object(m.jsx)(o.a,{item:!0,children:Object(m.jsx)(j.a,{mt:10,children:Object(m.jsx)(re,{})})})})]})}},{path:"/weather",name:"Weather",Component:function(){var e,t,n,c,i,r=Object(a.useContext)(M),s=z();return r.weatherData?Object(m.jsxs)(o.a,{container:!0,direction:"column",wrap:"nowrap",justifyContent:"space-between",className:s.container,children:[Object(m.jsx)(o.a,{item:!0,children:Object(m.jsx)(E,{city:r.weatherData.name})}),Object(m.jsx)(o.a,{item:!0,children:Object(m.jsx)(T,{temp:null===(e=r.weatherData.current)||void 0===e?void 0:e.temp,conditions:null===(t=r.weatherData.current)||void 0===t?void 0:t.weather.main,high:null===(n=r.weatherData.current)||void 0===n?void 0:n.max,low:null===(c=r.weatherData.current)||void 0===c?void 0:c.min,icon:null===(i=r.weatherData.current)||void 0===i?void 0:i.weather.icon})}),Object(m.jsx)(o.a,{item:!0,children:Object(m.jsx)(A,{hourly:r.weatherData.hourly||[]})}),Object(m.jsx)(o.a,{item:!0,children:Object(m.jsx)(g,{daily:r.weatherData.daily||[]})})]}):Object(m.jsx)(I.a,{to:{pathname:"/"}})}}];function he(){var e=le();return Object(m.jsx)(s.a,{disableGutters:!0,className:e.container,children:Object(m.jsx)(_,{children:Object(m.jsx)(oe.a,{basename:"/weather-app-react-typescript-material-ui",children:de.map((function(t){var n=t.path,a=t.Component;return Object(m.jsx)(I.b,{exact:!0,path:n,children:function(t){var n=t.match;return Object(m.jsx)(je.a,{in:null!=n,timeout:300,classNames:"page",unmountOnExit:!0,children:Object(m.jsx)("div",{className:"page",children:Object(m.jsx)(o.a,{container:!0,justifyContent:"center",className:e.container,children:Object(m.jsx)(o.a,{item:!0,xs:12,md:8,lg:6,children:Object(m.jsx)(j.a,{boxShadow:24,height:"100%",children:Object(m.jsx)(a,{})})})})})})}},n)}))})})})}r.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(he,{})}),document.getElementById("root"))}},[[129,1,2]]]);
//# sourceMappingURL=main.61a49619.chunk.js.map